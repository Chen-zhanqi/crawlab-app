(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a9ea9f02"],{"0b25":function(t,e,n){},"2d31":function(t,e,n){"use strict";var a=n("b6db"),s=n.n(a);s.a},"34d9":function(t,e,n){"use strict";var a=n("8216"),s=n("be57");t.exports=a("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),s)},"64bf":function(t,e,n){var a=n("efe2");t.exports=!a((function(){return Object.isExtensible(Object.preventExtensions({}))}))},8216:function(t,e,n){"use strict";var a=n("1c8b"),s=n("d890"),i=n("e8d6"),r=n("1944"),o=n("a83a"),l=n("262e"),c=n("c4e4"),u=n("a719"),d=n("efe2"),f=n("f471"),p=n("27b5"),h=n("7063");t.exports=function(t,e,n){var m=-1!==t.indexOf("Map"),g=-1!==t.indexOf("Weak"),b=m?"set":"add",v=s[t],w=v&&v.prototype,y=v,_={},$=function(t){var e=w[t];r(w,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(g&&!u(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!u(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(g&&!u(t))&&e.call(this,0===t?0:t)}:function(t,n){return e.call(this,0===t?0:t,n),this})};if(i(t,"function"!=typeof v||!(g||w.forEach&&!d((function(){(new v).entries().next()})))))y=n.getConstructor(e,t,m,b),o.REQUIRED=!0;else if(i(t,!0)){var x=new y,k=x[b](g?{}:-0,1)!=x,D=d((function(){x.has(1)})),S=f((function(t){new v(t)})),L=!g&&d((function(){var t=new v,e=5;while(e--)t[b](e,e);return!t.has(-0)}));S||(y=e((function(e,n){c(e,y,t);var a=h(new v,e,y);return void 0!=n&&l(n,a[b],a,m),a})),y.prototype=w,w.constructor=y),(D||L)&&($("delete"),$("has"),m&&$("get")),(L||k)&&$(b),g&&w.clear&&delete w.clear}return _[t]=y,a({global:!0,forced:y!=v},_),p(y,t),g||n.setStrong(y,t,m),y}},"844e":function(t,e,n){},"8a23":function(t,e,n){"use strict";var a=n("0b25"),s=n.n(a);s.a},a1ba:function(t,e,n){},a83a:function(t,e,n){var a=n("d5a8"),s=n("a719"),i=n("faa8"),r=n("d910").f,o=n("7e8b"),l=n("64bf"),c=o("meta"),u=0,d=Object.isExtensible||function(){return!0},f=function(t){r(t,c,{value:{objectID:"O"+ ++u,weakData:{}}})},p=function(t,e){if(!s(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,c)){if(!d(t))return"F";if(!e)return"E";f(t)}return t[c].objectID},h=function(t,e){if(!i(t,c)){if(!d(t))return!0;if(!e)return!1;f(t)}return t[c].weakData},m=function(t){return l&&g.REQUIRED&&d(t)&&!i(t,c)&&f(t),t},g=t.exports={REQUIRED:!1,fastKey:p,getWeakData:h,onFreeze:m};a[c]=!0},b6db:function(t,e,n){},bae3:function(t,e,n){"use strict";var a=n("844e"),s=n.n(a);s.a},be57:function(t,e,n){"use strict";var a=n("d910").f,s=n("6d60"),i=n("99ab"),r=n("e349"),o=n("c4e4"),l=n("262e"),c=n("99ee"),u=n("403f"),d=n("1e2c"),f=n("a83a").fastKey,p=n("b702"),h=p.set,m=p.getterFor;t.exports={getConstructor:function(t,e,n,c){var u=t((function(t,a){o(t,u,e),h(t,{type:e,index:s(null),first:void 0,last:void 0,size:0}),d||(t.size=0),void 0!=a&&l(a,t[c],t,n)})),p=m(e),g=function(t,e,n){var a,s,i=p(t),r=b(t,e);return r?r.value=n:(i.last=r={index:s=f(e,!0),key:e,value:n,previous:a=i.last,next:void 0,removed:!1},i.first||(i.first=r),a&&(a.next=r),d?i.size++:t.size++,"F"!==s&&(i.index[s]=r)),t},b=function(t,e){var n,a=p(t),s=f(e);if("F"!==s)return a.index[s];for(n=a.first;n;n=n.next)if(n.key==e)return n};return i(u.prototype,{clear:function(){var t=this,e=p(t),n=e.index,a=e.first;while(a)a.removed=!0,a.previous&&(a.previous=a.previous.next=void 0),delete n[a.index],a=a.next;e.first=e.last=void 0,d?e.size=0:t.size=0},delete:function(t){var e=this,n=p(e),a=b(e,t);if(a){var s=a.next,i=a.previous;delete n.index[a.index],a.removed=!0,i&&(i.next=s),s&&(s.previous=i),n.first==a&&(n.first=s),n.last==a&&(n.last=i),d?n.size--:e.size--}return!!a},forEach:function(t){var e,n=p(this),a=r(t,arguments.length>1?arguments[1]:void 0,3);while(e=e?e.next:n.first){a(e.value,e.key,this);while(e&&e.removed)e=e.previous}},has:function(t){return!!b(this,t)}}),i(u.prototype,n?{get:function(t){var e=b(this,t);return e&&e.value},set:function(t,e){return g(this,0===t?0:t,e)}}:{add:function(t){return g(this,t=0===t?0:t,t)}}),d&&a(u.prototype,"size",{get:function(){return p(this).size}}),u},setStrong:function(t,e,n){var a=e+" Iterator",s=m(e),i=m(a);c(t,e,(function(t,e){h(this,{type:a,target:t,state:s(t),kind:e,last:void 0})}),(function(){var t=i(this),e=t.kind,n=t.last;while(n&&n.removed)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),u(e)}}},d4d2:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-dialog",{attrs:{visible:t.isShowAddNodeInstruction,title:t.$t("Notification"),width:"720px"},on:{"update:visible":function(e){t.isShowAddNodeInstruction=e}}},[n("div",{staticClass:"content markdown-body",domProps:{innerHTML:t._s(t.addNodeInstructionHtml)}})]),n("el-tabs",{attrs:{type:"border-card"},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[n("el-tab-pane",{attrs:{label:t.$t("Node List")}},[n("div",{staticClass:"filter-wrapper"},[n("el-button",{attrs:{size:"small",type:"success",icon:"el-icon-plus"},on:{click:t.onAddNode}},[t._v(" "+t._s(t.$t("Add Node"))+" ")])],1),n("el-table",{staticClass:"table",attrs:{data:t.filteredTableData,"header-cell-style":{background:"rgb(48, 65, 86)",color:"white"},border:""},on:{"row-click":t.onRowClick,"expand-change":t.onRowExpand}},[n("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-form",{staticClass:"node-detail",attrs:{model:e.row,"label-width":"120px",inline:""}},[n("el-form-item",{attrs:{label:t.$t("OS")}},[n("span",[t._v(t._s(e.row.systemInfo?t.getOSName(e.row.systemInfo.os):""))])]),n("el-form-item",{attrs:{label:t.$t("ARCH")}},[n("span",[t._v(t._s(e.row.systemInfo?e.row.systemInfo.arch:""))])]),n("el-form-item",{attrs:{label:t.$t("Number of CPU")}},[n("span",[t._v(t._s(e.row.systemInfo?e.row.systemInfo.num_cpu:""))])])],1),n("el-form",{staticClass:"node-detail executable",attrs:{model:e.row,"label-width":"120px"}},[n("el-form-item",{attrs:{label:t.$t("Executables")}},[n("ul",{staticClass:"executable-list"},t._l(t.getExecutables(e.row),(function(e,a){return n("li",{key:a,staticClass:"executable-item"},[n("el-tooltip",{attrs:{content:e.path}},[n("div",[e.file_name.match(/^python/)?[n("font-awesome-icon",{attrs:{icon:["fab","python"]}})]:e.file_name.match(/^java/)?[n("font-awesome-icon",{attrs:{icon:["fab","java"]}})]:e.file_name.match(/^bash$|^sh$/)?[n("font-awesome-icon",{attrs:{icon:["fab","linux"]}})]:e.file_name.match(/^node/)?[n("font-awesome-icon",{attrs:{icon:["fab","node-js"]}})]:e.file_name.match(/^php/)?[n("font-awesome-icon",{attrs:{icon:["fab","php"]}})]:[n("font-awesome-icon",{attrs:{icon:["fas","terminal"]}})],n("span",{staticClass:"executable-label"},[t._v(t._s(e.display_name))])],2)])],1)})),0)])],1)]}}])}),t._l(t.columns,(function(e){return["status"===e.name?n("el-table-column",{key:e.name,attrs:{label:t.$t(e.label),sortable:e.sortable,width:e.width},scopedSlots:t._u([{key:"default",fn:function(e){return["offline"===e.row.status?n("el-tag",{attrs:{type:"info"}},[t._v(t._s(t.$t("Offline")))]):"online"===e.row.status?n("el-tag",{attrs:{type:"success"}},[t._v(t._s(t.$t("Online")))]):n("el-tag",{attrs:{type:"danger"}},[t._v(t._s(t.$t("Unavailable")))])]}}],null,!0)}):"type"===e.name?n("el-table-column",{key:e.name,attrs:{label:t.$t(e.label),sortable:e.sortable,width:e.width},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.is_master?n("el-tag",{attrs:{type:"primary"}},[t._v(t._s(t.$t("Master")))]):n("el-tag",{attrs:{type:"warning"}},[t._v(t._s(t.$t("Worker")))])]}}],null,!0)}):n("el-table-column",{key:e.name,attrs:{property:e.name,label:t.$t(e.label),sortable:e.sortable,align:e.align||"left",width:e.width}})]})),n("el-table-column",{attrs:{label:t.$t("Action"),align:"left",width:"160",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tooltip",{attrs:{content:t.$t("View"),placement:"top"}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:function(n){return t.onView(e.row)}}})],1),n("el-tooltip",{attrs:{content:t.$t("Remove"),placement:"top"}},["online"!==e.row.status?n("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(n){return t.onRemove(e.row)}}}):t._e()],1)]}}])})],2),n("div",{staticClass:"pagination"},[n("el-pagination",{attrs:{"current-page":t.pagination.pageNum,"page-sizes":[10,20,50,100],"page-size":t.pagination.pageSize,layout:"sizes, prev, pager, next",total:t.nodeList.length},on:{"update:currentPage":function(e){return t.$set(t.pagination,"pageNum",e)},"update:current-page":function(e){return t.$set(t.pagination,"pageNum",e)},"update:pageSize":function(e){return t.$set(t.pagination,"pageSize",e)},"update:page-size":function(e){return t.$set(t.pagination,"pageSize",e)},"current-change":t.onPageChange,"size-change":t.onPageChange}})],1)],1),n("el-tab-pane",{attrs:{label:t.$t("Installation")}},[n("node-installation-matrix",{attrs:{"active-tab":t.activeTab}})],1),n("el-tab-pane",{attrs:{label:t.$t("Network")}},[n("node-network",{attrs:{"active-tab":t.activeTab}})],1)],1)],1)},s=[],i=(n("dbb3"),n("ecb4"),n("053b"),n("1fb3"),n("e793")),r=n("7346"),o=n.n(r),l=n("9f3a"),c=(n("0e50"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"network-chart"}})}),u=[],d=(n("b130"),n("2eeb"),n("4d28")),f=n.n(d),p={name:"NodeNetwork",props:{activeTab:{type:String,default:""}},data:function(){return{chart:void 0}},computed:{masterNode:function(){for(var t=this.$store.state.node.nodeList,e=0;e<t.length;e++)if(t[e].is_master)return t[e];return{}},nodes:function(){var t=this.$store.state.node.nodeList;return t=t.filter((function(t){return"offline"!==t.status})).map((function(t){return t.id=t._id,t.x=Math.floor(100*Math.random()),t.y=Math.floor(100*Math.random()),t.itemStyle={color:t.is_master?"#409EFF":"#e6a23c"},t})),t.push({id:"mongodb",name:"MongoDB",x:Math.floor(100*Math.random()),y:Math.floor(100*Math.random()),itemStyle:{color:"#67c23a"}}),t.push({id:"redis",name:"Redis",x:Math.floor(100*Math.random()),y:Math.floor(100*Math.random()),itemStyle:{color:"#f56c6c"}}),t},links:function(){for(var t=[],e=0;e<this.nodes.length;e++)"offline"!==this.nodes[e].status&&(["redis","mongodb"].includes(this.nodes[e].id)||(t.push({source:this.nodes[e].id,target:"mongodb",value:10,lineStyle:{color:"#67c23a"}}),t.push({source:this.nodes[e].id,target:"redis",value:10,lineStyle:{color:"#f56c6c"}}),this.masterNode.id,this.nodes[e].id));return t}},watch:{activeTab:function(){var t=this;setTimeout((function(){t.render()}),0)}},mounted:function(){this.render()},methods:{render:function(){var t={title:{text:this.$t("Node Network")},tooltip:{formatter:function(t){if(t.data.name){var e='<span style="margin-right:5px;display:inline-block;height:12px;width:12px;border-radius:6px;background:'+t.color+'"></span>';return t.data.name&&(e+="<span>"+t.data.name+"</span><br>"),t.data.ip&&(e+="<span>IP: "+t.data.ip+"</span><br>"),t.data.mac&&(e+="<span>MAC: "+t.data.mac+"</span><br>"),e}}},animationDurationUpdate:1500,animationEasingUpdate:"quinticInOut",series:[{type:"graph",layout:"force",symbolSize:50,roam:!0,label:{normal:{show:!0}},edgeSymbol:["circle","arrow"],edgeSymbolSize:[4,10],edgeLabel:{normal:{textStyle:{fontSize:20}}},focusOneNodeAdjacency:!0,force:{initLayout:"force",repulsion:30,gravity:.001,edgeLength:30},draggable:!0,data:this.nodes,links:this.links,lineStyle:{normal:{opacity:.9,width:2,curveness:0}}}]};this.chart=f.a.init(this.$el),this.chart.setOption(t),this.chart.resize()}}},h=p,m=(n("8a23"),n("9ca4")),g=Object(m["a"])(h,c,u,!1,null,"b8ba31f4",null),b=g.exports,v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"node-installation-matrix"},[n("el-tabs",{model:{value:t.activeTabName,callback:function(e){t.activeTabName=e},expression:"activeTabName"}},[n("el-tab-pane",{attrs:{label:t.$t("Languages"),name:"lang"}},[n("div",{staticClass:"lang-table"},[n("el-table",{staticClass:"table",attrs:{data:t.nodeList,"header-cell-style":{background:"rgb(48, 65, 86)",color:"white",height:"50px"},border:""},on:{"row-click":t.onLangTableRowClick}},[n("el-table-column",{attrs:{label:t.$t("Node"),width:"240px",prop:"name",fixed:""}}),n("el-table-column",{attrs:{label:t.$t("nodeList.type"),width:"120px",fixed:""},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.is_master?n("el-tag",{attrs:{type:"primary"}},[t._v(t._s(t.$t("Master")))]):n("el-tag",{attrs:{type:"warning"}},[t._v(t._s(t.$t("Worker")))])]}}])}),n("el-table-column",{attrs:{label:t.$t("Status"),width:"120px",fixed:""},scopedSlots:t._u([{key:"default",fn:function(e){return["offline"===e.row.status?n("el-tag",{attrs:{type:"info"}},[t._v(t._s(t.$t("Offline")))]):"online"===e.row.status?n("el-tag",{attrs:{type:"success"}},[t._v(t._s(t.$t("Online")))]):n("el-tag",{attrs:{type:"danger"}},[t._v(t._s(t.$t("Unavailable")))])]}}])}),t._l(t.langs,(function(e){return n("el-table-column",{key:e.name,attrs:{label:e.label,width:"220px"},scopedSlots:t._u([{key:"header",fn:function(e){return[n("div",{staticClass:"header-with-action"},[n("span",[t._v(t._s(e.column.label))]),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(n){return t.onInstallLangAll(e.column.label,n)}}},[t._v(" "+t._s(t.$t("Install"))+" ")])],1)]}},{key:"default",fn:function(a){return["installed"===t.getLangInstallStatus(a.row._id,e.name)?[n("el-tag",{attrs:{type:"success"}},[n("i",{staticClass:"el-icon-check"}),t._v(" "+t._s(t.$t("Installed"))+" ")])]:"installing"===t.getLangInstallStatus(a.row._id,e.name)?[n("el-tag",{attrs:{type:"warning"}},[n("i",{staticClass:"el-icon-loading"}),t._v(" "+t._s(t.$t("Installing"))+" ")])]:["installing-other","not-installed"].includes(t.getLangInstallStatus(a.row._id,e.name))?[n("div",{staticClass:"cell-with-action"},[n("el-tag",{attrs:{type:"danger"}},[n("i",{staticClass:"el-icon-error"}),t._v(" "+t._s(t.$t("Not Installed"))+" ")]),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.onInstallLang(a.row._id,a.column.label,e)}}},[t._v(" "+t._s(t.$t("Install"))+" ")])],1)]:"na"===t.getLangInstallStatus(a.row._id,e.name)?[n("el-tag",{attrs:{type:"info"}},[n("i",{staticClass:"el-icon-question"}),t._v(" "+t._s(t.$t("N/A"))+" ")])]:t._e()]}}],null,!0)})}))],2)],1)]),n("el-tab-pane",{attrs:{label:t.$t("Dependencies"),name:"dep"}},[n("el-form",{staticClass:"search-form",attrs:{inline:""}},[n("el-form-item",[n("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:t.$t("Search Dependencies")},model:{value:t.depName,callback:function(e){t.depName=e},expression:"depName"}})],1),n("el-form-item",[n("el-button",{attrs:{size:"small",icon:"el-icon-search",type:"success"},on:{click:t.onSearch}},[t._v(" "+t._s(t.$t("Search"))+" ")])],1),n("el-form-item",[n("el-checkbox",{attrs:{label:t.$t("Show installed")},on:{change:t.onIsShowInstalledChange},model:{value:t.isShowInstalled,callback:function(e){t.isShowInstalled=e},expression:"isShowInstalled"}})],1)],1),n("el-tabs",{model:{value:t.activeLang,callback:function(e){t.activeLang=e},expression:"activeLang"}},t._l(t.langsWithDeps,(function(t){return n("el-tab-pane",{key:t.name,attrs:{name:t.name,label:t.label}})})),1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.isDepsLoading,expression:"isDepsLoading"}],staticClass:"table",attrs:{height:"calc(100vh - 320px)",data:t.computedDepsSet,"header-cell-style":{background:"rgb(48, 65, 86)",color:"white",height:"50px"},border:""}},[n("el-table-column",{attrs:{label:t.$t("Dependency"),prop:"name",width:"180px",fixed:""}}),t._e(),t._l(t.activeNodes,(function(e){return n("el-table-column",{key:e._id,attrs:{label:e.name,width:"220px",align:"center"},scopedSlots:t._u([{key:"header",fn:function(e){return[t._v(" "+t._s(e.column.label)+" ")]}},{key:"default",fn:function(a){return["installed"===t.getDepStatus(e,a.row)?n("div",{staticClass:"cell-with-action"},[n("el-tag",{attrs:{type:"success"}},[t._v(" "+t._s(t.$t("Installed"))+" ")]),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){return t.uninstallDep(e,a.row)}}},[t._v(" "+t._s(t.$t("Uninstall"))+" ")])],1):"installing"===t.getDepStatus(e,a.row)?n("div",{staticClass:"cell-with-action"},[n("el-tag",{attrs:{type:"warning"}},[n("i",{staticClass:"el-icon-loading"}),t._v(" "+t._s(t.$t("Installing"))+" ")])],1):"uninstalled"===t.getDepStatus(e,a.row)?n("div",{staticClass:"cell-with-action"},[n("el-tag",{attrs:{type:"danger"}},[t._v(" "+t._s(t.$t("Not Installed"))+" ")]),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){return t.installDep(e,a.row)}}},[t._v(" "+t._s(t.$t("Install"))+" ")])],1):t._e()]}}],null,!0)})}))],2)],1),n("el-tab-pane",{attrs:{label:"Web Driver",name:"webdriver"}},[n("div",{staticClass:"webdriver-table"},[n("el-table",{staticClass:"table",attrs:{data:t.nodeList,"header-cell-style":{background:"rgb(48, 65, 86)",color:"white",height:"50px"},border:""},on:{"row-click":t.onLangTableRowClick}},[n("el-table-column",{attrs:{label:t.$t("Node"),width:"240px",prop:"name",fixed:""}}),n("el-table-column",{attrs:{label:t.$t("nodeList.type"),width:"120px",fixed:""},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.is_master?n("el-tag",{attrs:{type:"primary"}},[t._v(t._s(t.$t("Master")))]):n("el-tag",{attrs:{type:"warning"}},[t._v(t._s(t.$t("Worker")))])]}}])}),n("el-table-column",{attrs:{label:t.$t("Status"),width:"120px",fixed:""},scopedSlots:t._u([{key:"default",fn:function(e){return["offline"===e.row.status?n("el-tag",{attrs:{type:"info"}},[t._v(t._s(t.$t("Offline")))]):"online"===e.row.status?n("el-tag",{attrs:{type:"success"}},[t._v(t._s(t.$t("Online")))]):n("el-tag",{attrs:{type:"danger"}},[t._v(t._s(t.$t("Unavailable")))])]}}])}),t._l(t.webdrivers,(function(e){return n("el-table-column",{key:e.name,attrs:{label:e.label,width:"220px"},scopedSlots:t._u([{key:"header",fn:function(e){return[n("div",{staticClass:"header-with-action"},[n("span",[t._v(t._s(e.column.label))]),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(n){return t.onInstallLangAll(e.column.label,n)}}},[t._v(" "+t._s(t.$t("Install"))+" ")])],1)]}},{key:"default",fn:function(a){return["installed"===t.getLangInstallStatus(a.row._id,e.name)?[n("el-tag",{attrs:{type:"success"}},[n("i",{staticClass:"el-icon-check"}),t._v(" "+t._s(t.$t("Installed"))+" ")])]:"installing"===t.getLangInstallStatus(a.row._id,e.name)?[n("el-tag",{attrs:{type:"warning"}},[n("i",{staticClass:"el-icon-loading"}),t._v(" "+t._s(t.$t("Installing"))+" ")])]:["installing-other","not-installed"].includes(t.getLangInstallStatus(a.row._id,e.name))?[n("div",{staticClass:"cell-with-action"},[n("el-tag",{attrs:{type:"danger"}},[n("i",{staticClass:"el-icon-error"}),t._v(" "+t._s(t.$t("Not Installed"))+" ")]),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.onInstallLang(a.row._id,a.column.label,e)}}},[t._v(" "+t._s(t.$t("Install"))+" ")])],1)]:"na"===t.getLangInstallStatus(a.row._id,e.name)?[n("el-tag",{attrs:{type:"info"}},[n("i",{staticClass:"el-icon-question"}),t._v(" "+t._s(t.$t("N/A"))+" ")])]:t._e()]}}],null,!0)})}))],2)],1)])],1)],1)},w=[],y=(n("fe59"),n("98e0"),n("e18c"),n("34d9"),n("96db"),n("08ba"),n("af86"),n("6a61"),n("cf7f")),_={name:"NodeInstallationMatrix",props:{activeTab:{type:String,default:""}},data:function(){return{allLangs:[{label:"Python",name:"python",hasDeps:!0,script:"install-python.sh",type:"lang"},{label:"Node.js",name:"node",hasDeps:!0,script:"install-nodejs.sh",type:"lang"},{label:"Java",name:"java",hasDeps:!1,script:"install-java.sh",type:"lang"},{label:".Net Core",name:"dotnet",hasDeps:!1,script:"install-dotnet.sh",type:"lang"},{label:"PHP",name:"php",hasDeps:!1,script:"install-php.sh",type:"lang"},{label:"Golang",name:"go",hasDeps:!1,script:"install-go.sh",type:"lang"},{label:"Chrome Driver",name:"chromedriver",script:"install-chromedriver.sh",type:"webdriver"},{label:"Firefox",name:"firefox",script:"install-firefox.sh",type:"webdriver"}],langsDataDict:{},handle:void 0,activeTabName:"lang",depsDataDict:{},depsSet:new Set,activeLang:"python",isDepsLoading:!1,depName:"",isShowInstalled:!0,depList:[]}},computed:Object(i["a"])(Object(i["a"])({},Object(l["c"])("node",["nodeList"])),{},{langs:function(){return this.allLangs.filter((function(t){return"lang"===t.type}))},webdrivers:function(){return this.allLangs.filter((function(t){return"webdriver"===t.type}))},activeNodes:function(){return this.nodeList.filter((function(t){return"online"===t.status}))},computedDepsSet:function(){return Array.from(this.depsSet).map((function(t){return{name:t}}))},langsWithDeps:function(){return this.allLangs.filter((function(t){return t.hasDeps}))}}),watch:{activeLang:function(){this.getDepsData()}},created:function(){var t=this;return Object(y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:setTimeout((function(){t.getLangsData(),t.getDepsData()}),1e3),t.handle=setInterval((function(){t.getLangsData()}),1e4);case 2:case"end":return e.stop()}}),e)})))()},destroyed:function(){clearInterval(this.handle)},methods:{getLangsData:function(){var t=this;return Object(y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.nodeList.map(function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("online"===n.status){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.$request.get("/nodes/".concat(n._id,"/langs"));case 4:if(a=e.sent,a.data.data){e.next=7;break}return e.abrupt("return");case 7:a.data.data.forEach((function(e){var a=n._id+"|"+e.executable_name;t.$set(t.langsDataDict,a,e)}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})))()},getDepsData:function(){var t=this;return Object(y["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isDepsLoading=!0,t.depsDataDict={},t.depsSet=new Set,n=new Set,e.next=6,Promise.all(t.nodeList.map(function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(a){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("online"===a.status){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.$request.get("/nodes/".concat(a._id,"/deps/installed"),{lang:t.activeLang});case 4:if(s=e.sent,s.data.data){e.next=7;break}return e.abrupt("return");case 7:s.data.data.forEach((function(e){n.add(e.name);var s=a._id+"|"+e.name;t.$set(t.depsDataDict,s,"installed")}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:t.depsSet=n,t.isDepsLoading=!1;case 8:case"end":return e.stop()}}),e)})))()},getLang:function(t,e){var n=t+"|"+e;return this.langsDataDict[n]},getLangInstallStatus:function(t,e){var n=this.getLang(t,e);return n&&n.install_status?n.install_status:"na"},getLangFromLabel:function(t){for(var e=0;e<this.allLangs.length;e++){var n=this.allLangs[e];if(n.label===t)return n}},onInstallLang:function(t,e,n){var a=this;return Object(y["a"])(regeneratorRuntime.mark((function s(){var i,r,o;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return n&&n.stopPropagation(),i=a.getLangFromLabel(e),s.next=4,a.$request.put("/system-tasks",{run_type:"selected-nodes",node_ids:[t],script:i.script});case 4:r=s.sent,r&&r.data&&!r.data.error&&a.$message.success(a.$t("Started to install")+" "+i.label),o=t+"|"+i.name,a.$set(a.langsDataDict[o],"install_status","installing"),setTimeout((function(){a.getLangsData()}),1e3),a.$st.sendEv("节点列表","安装","安装语言");case 10:case"end":return s.stop()}}),s)})))()},onInstallLangAll:function(t,e){var n=this;return Object(y["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.stopPropagation(),n.nodeList.filter((function(e){if("online"!==e.status)return!1;var a=n.getLangFromLabel(t),s=e._id+"|"+a.name;return!!n.langsDataDict[s]&&!["installing","installed"].includes(n.langsDataDict[s].install_status)})).forEach((function(a){n.onInstallLang(a._id,t,e)})),setTimeout((function(){n.getLangsData()}),1e3),n.$st.sendEv("节点列表","安装","安装语言-所有节点");case 4:case"end":return a.stop()}}),a)})))()},onLangTableRowClick:function(t){this.$router.push("/nodes/".concat(t._id)),this.$st.sendEv("节点列表","安装","查看节点详情")},getDepStatus:function(t,e){var n=t._id+"|"+e.name;return this.depsDataDict[n]?this.depsDataDict[n]:"uninstalled"},installDep:function(t,e){var n=this;return Object(y["a"])(regeneratorRuntime.mark((function a(){var s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s=t._id+"|"+e.name,n.$set(n.depsDataDict,s,"installing"),a.next=4,n.$request.post("/nodes/".concat(t._id,"/deps/install"),{lang:n.activeLang,dep_name:e.name});case 4:i=a.sent,!i||i.error?(n.$notify.error({title:n.$t("Installing dependency failed"),message:n.$t("The dependency installation is unsuccessful: ")+e.name}),n.$set(n.depsDataDict,s,"uninstalled")):(n.$notify.success({title:n.$t("Installing dependency successful"),message:n.$t("You have successfully installed a dependency: ")+e.name}),n.$set(n.depsDataDict,s,"installed")),n.$request.put("/actions",{type:"install_dep"}),n.$st.sendEv("节点列表","安装","安装依赖");case 8:case"end":return a.stop()}}),a)})))()},uninstallDep:function(t,e){var n=this;return Object(y["a"])(regeneratorRuntime.mark((function a(){var s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s=t._id+"|"+e.name,n.$set(n.depsDataDict,s,"installing"),a.next=4,n.$request.post("/nodes/".concat(t._id,"/deps/uninstall"),{lang:n.activeLang,dep_name:e.name});case 4:i=a.sent,!i||i.error?(n.$notify.error({title:n.$t("Uninstalling dependency failed"),message:n.$t("The dependency uninstallation is unsuccessful: ")+e.name}),n.$set(n.depsDataDict,s,"installed")):(n.$notify.success({title:n.$t("Uninstalling dependency successful"),message:n.$t("You have successfully uninstalled a dependency: ")+e.name}),n.$set(n.depsDataDict,s,"uninstalled")),n.$st.sendEv("节点列表","安装","卸载依赖");case 7:case"end":return a.stop()}}),a)})))()},onSearch:function(){this.isShowInstalled=!1,this.getDepList(),this.$st.sendEv("节点列表","安装","搜索依赖")},getDepList:function(){var t=this;return Object(y["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.nodeList.filter((function(t){return t.is_master}))[0],t.depsSet=[],t.isDepsLoading=!0,e.next=5,t.$request.get("/nodes/".concat(n._id,"/deps"),{lang:t.activeLang,dep_name:t.depName});case 5:a=e.sent,t.isDepsLoading=!1,t.depsSet=new Set(a.data.data.map((function(t){return t.name})));case 8:case"end":return e.stop()}}),e)})))()},onIsShowInstalledChange:function(t){t?this.getDepsData():this.depsSet=[],this.$st.sendEv("节点列表","安装","点击查看已安装")}}},$=_,x=(n("bae3"),Object(m["a"])($,v,w,!1,null,"935dc38a",null)),k=x.exports,D={name:"NodeList",components:{NodeInstallationMatrix:k,NodeNetwork:b},data:function(){return{pagination:{pageNum:0,pageSize:10},isEditMode:!1,dialogVisible:!1,filter:{keyword:""},columns:[{name:"name",label:"Name",width:"220"},{name:"ip",label:"IP",width:"160"},{name:"type",label:"nodeList.type",width:"120"},{name:"status",label:"Status",width:"120"},{name:"description",label:"Description",width:"auto"}],nodeFormRules:{name:[{required:!0,message:"Required Field",trigger:"change"}]},activeTab:void 0,isButtonClicked:!1,isShowAddNodeInstruction:!1,converter:new o.a.Converter,addNodeInstructionMarkdown:"addNodeInstruction"}},computed:Object(i["a"])(Object(i["a"])({},Object(l["c"])("node",["nodeList","nodeForm"])),{},{filteredTableData:function(){var t=this;return this.nodeList.filter((function(e){if(!t.filter.keyword)return!0;for(var n=0;n<t.columns.length;n++){var a=t.columns[n].name;if(e[a]&&e[a].toLowerCase().indexOf(t.filter.keyword.toLowerCase())>-1)return!0}return!1}))},addNodeInstructionHtml:function(){if(this.converter)return this.converter.makeHtml(this.$t(this.addNodeInstructionMarkdown))}}),created:function(){this.$store.dispatch("node/getNodeList")},methods:{onSearch:function(){},onAddNode:function(){this.isShowAddNodeInstruction=!0},onRefresh:function(){this.$store.dispatch("node/getNodeList"),this.$st.sendEv("节点列表","刷新")},onSubmit:function(){var t=this,e=this,n="nodeForm";this.$refs[n].validate((function(n){if(!n)return!1;t.isEditMode?e.$store.dispatch("node/editNode"):e.$store.dispatch("node/addNode"),e.dialogVisible=!1}))},onCancel:function(){this.$store.commit("node/SET_NODE_FORM",{}),this.dialogVisible=!1},onDialogClose:function(){this.$store.commit("node/SET_NODE_FORM",{}),this.dialogVisible=!1},onEdit:function(t){this.isEditMode=!0,this.$store.commit("node/SET_NODE_FORM",t),this.dialogVisible=!0},onRemove:function(t){var e=this;this.isButtonClicked=!0,setTimeout((function(){e.isButtonClicked=!1}),100),this.$confirm(this.$t("Are you sure to delete this node?"),this.$t("Notification"),{confirmButtonText:this.$t("Confirm"),cancelButtonText:this.$t("Cancel"),type:"warning"}).then((function(){e.$store.dispatch("node/deleteNode",t._id).then((function(){e.$message({type:"success",message:"Deleted successfully"})})),e.$st.sendEv("节点列表","删除节点")}))},onView:function(t){var e=this;this.isButtonClicked=!0,setTimeout((function(){e.isButtonClicked=!1}),100),this.$router.push("/nodes/".concat(t._id)),this.$st.sendEv("节点列表","查看节点")},onPageChange:function(){this.$store.dispatch("node/getNodeList")},onRowExpand:function(t){this.$store.dispatch("node/getNodeSystemInfo",t._id)},onRowClick:function(t){this.isButtonClicked||this.onView(t)},getExecutables:function(t){return t.systemInfo&&t.systemInfo.executables?t.systemInfo.executables:[]},getOSName:function(t){return"linux"===t?"Linux":"windows"===t?"Windows":"darwin"===t?"Mac OS (darwin)":t}}},S=D,L=(n("d9aa"),n("2d31"),Object(m["a"])(S,a,s,!1,null,"2f677208",null));e["default"]=L.exports},d9aa:function(t,e,n){"use strict";var a=n("a1ba"),s=n.n(a);s.a}}]);
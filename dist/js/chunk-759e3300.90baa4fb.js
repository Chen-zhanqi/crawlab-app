(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-759e3300"],{"1d45":function(t,e,n){!function(e,n){t.exports=n()}(0,(function(){"use strict";var t="millisecond",e="second",n="minute",r="hour",a="day",i="week",s="month",o="quarter",u="year",c="date",l=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?.?(\d+)?$/,d=/\[([^\]]+)]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,h=function(t,e,n){var r=String(t);return!r||r.length>=e?t:""+Array(e+1-r.length).join(n)+t},f={s:h,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),a=n%60;return(e<=0?"+":"-")+h(r,2,"0")+":"+h(a,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),a=e.add(r,s),i=n-a<0,o=e.add(r+(i?-1:1),s);return+(-(r+(n-a)/(i?a-o:o-a))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(l){return{M:s,y:u,w:i,d:a,D:c,h:r,m:n,s:e,ms:t,Q:o}[l]||String(l||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},p="en",g={};g[p]=m;var $=function(t){return t instanceof y},b=function(t,e,n){var r;if(!t)return p;if("string"==typeof t)g[t]&&(r=t),e&&(g[t]=e,r=t);else{var a=t.name;g[a]=t,r=a}return!n&&r&&(p=r),r||!n&&p},v=function(t,e){if($(t))return t.clone();var n="object"==typeof e?e:{};return n.date=t,n.args=arguments,new y(n)},M=f;M.l=b,M.i=$,M.w=function(t,e){return v(t,{locale:e.$L,utc:e.$u,$offset:e.$offset})};var y=function(){function h(t){this.$L=this.$L||b(t.locale,null,!0),this.parse(t)}var f=h.prototype;return f.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(M.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var r=e.match(l);if(r){var a=r[2]-1||0,i=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],a,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)):new Date(r[1],a,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)}}return new Date(e)}(t),this.init()},f.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},f.$utils=function(){return M},f.isValid=function(){return!("Invalid Date"===this.$d.toString())},f.isSame=function(t,e){var n=v(t);return this.startOf(e)<=n&&n<=this.endOf(e)},f.isAfter=function(t,e){return v(t)<this.startOf(e)},f.isBefore=function(t,e){return this.endOf(e)<v(t)},f.$g=function(t,e,n){return M.u(t)?this[e]:this.set(n,t)},f.unix=function(){return Math.floor(this.valueOf()/1e3)},f.valueOf=function(){return this.$d.getTime()},f.startOf=function(t,o){var l=this,d=!!M.u(o)||o,h=M.p(t),f=function(t,e){var n=M.w(l.$u?Date.UTC(l.$y,e,t):new Date(l.$y,e,t),l);return d?n:n.endOf(a)},m=function(t,e){return M.w(l.toDate()[t].apply(l.toDate("s"),(d?[0,0,0,0]:[23,59,59,999]).slice(e)),l)},p=this.$W,g=this.$M,$=this.$D,b="set"+(this.$u?"UTC":"");switch(h){case u:return d?f(1,0):f(31,11);case s:return d?f(1,g):f(0,g+1);case i:var v=this.$locale().weekStart||0,y=(p<v?p+7:p)-v;return f(d?$-y:$+(6-y),g);case a:case c:return m(b+"Hours",0);case r:return m(b+"Minutes",1);case n:return m(b+"Seconds",2);case e:return m(b+"Milliseconds",3);default:return this.clone()}},f.endOf=function(t){return this.startOf(t,!1)},f.$set=function(i,o){var l,d=M.p(i),h="set"+(this.$u?"UTC":""),f=(l={},l[a]=h+"Date",l[c]=h+"Date",l[s]=h+"Month",l[u]=h+"FullYear",l[r]=h+"Hours",l[n]=h+"Minutes",l[e]=h+"Seconds",l[t]=h+"Milliseconds",l)[d],m=d===a?this.$D+(o-this.$W):o;if(d===s||d===u){var p=this.clone().set(c,1);p.$d[f](m),p.init(),this.$d=p.set(c,Math.min(this.$D,p.daysInMonth())).$d}else f&&this.$d[f](m);return this.init(),this},f.set=function(t,e){return this.clone().$set(t,e)},f.get=function(t){return this[M.p(t)]()},f.add=function(t,o){var c,l=this;t=Number(t);var d=M.p(o),h=function(e){var n=v(l);return M.w(n.date(n.date()+Math.round(e*t)),l)};if(d===s)return this.set(s,this.$M+t);if(d===u)return this.set(u,this.$y+t);if(d===a)return h(1);if(d===i)return h(7);var f=(c={},c[n]=6e4,c[r]=36e5,c[e]=1e3,c)[d]||1,m=this.$d.getTime()+t*f;return M.w(m,this)},f.subtract=function(t,e){return this.add(-1*t,e)},f.format=function(t){var e=this;if(!this.isValid())return"Invalid Date";var n=t||"YYYY-MM-DDTHH:mm:ssZ",r=M.z(this),a=this.$locale(),i=this.$H,s=this.$m,o=this.$M,u=a.weekdays,c=a.months,l=function(t,r,a,i){return t&&(t[r]||t(e,n))||a[r].substr(0,i)},h=function(t){return M.s(i%12||12,t,"0")},f=a.meridiem||function(t,e,n){var r=t<12?"AM":"PM";return n?r.toLowerCase():r},m={YY:String(this.$y).slice(-2),YYYY:this.$y,M:o+1,MM:M.s(o+1,2,"0"),MMM:l(a.monthsShort,o,c,3),MMMM:l(c,o),D:this.$D,DD:M.s(this.$D,2,"0"),d:String(this.$W),dd:l(a.weekdaysMin,this.$W,u,2),ddd:l(a.weekdaysShort,this.$W,u,3),dddd:u[this.$W],H:String(i),HH:M.s(i,2,"0"),h:h(1),hh:h(2),a:f(i,s,!0),A:f(i,s,!1),m:String(s),mm:M.s(s,2,"0"),s:String(this.$s),ss:M.s(this.$s,2,"0"),SSS:M.s(this.$ms,3,"0"),Z:r};return n.replace(d,(function(t,e){return e||m[t]||r.replace(":","")}))},f.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},f.diff=function(t,c,l){var d,h=M.p(c),f=v(t),m=6e4*(f.utcOffset()-this.utcOffset()),p=this-f,g=M.m(this,f);return g=(d={},d[u]=g/12,d[s]=g,d[o]=g/3,d[i]=(p-m)/6048e5,d[a]=(p-m)/864e5,d[r]=p/36e5,d[n]=p/6e4,d[e]=p/1e3,d)[h]||p,l?g:M.a(g)},f.daysInMonth=function(){return this.endOf(s).$D},f.$locale=function(){return g[this.$L]},f.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=b(t,e,!0);return r&&(n.$L=r),n},f.clone=function(){return M.w(this.$d,this)},f.toDate=function(){return new Date(this.valueOf())},f.toJSON=function(){return this.isValid()?this.toISOString():null},f.toISOString=function(){return this.$d.toISOString()},f.toString=function(){return this.$d.toUTCString()},h}(),D=y.prototype;return v.prototype=D,[["$ms",t],["$s",e],["$m",n],["$H",r],["$W",a],["$M",s],["$y",u],["$D",c]].forEach((function(t){D[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),v.extend=function(t,e){return t(e,y,v),v},v.locale=b,v.isDayjs=$,v.unix=function(t){return v(1e3*t)},v.en=g[p],v.Ls=g,v}))},"2a9f":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"monitor node-monitor"},[n("div",{staticClass:"control-panel"},[n("monitor-time-range",{on:{change:t.onTimeRangeChange},model:{value:t.timeRange,callback:function(e){t.timeRange=e},expression:"timeRange"}})],1),n("ul",{staticClass:"chart-list"},t._l(t.metrics,(function(t){return n("li",{key:t,staticClass:"chart-item",attrs:{id:t}})})),0)])},a=[],i=(n("2eeb"),n("053b"),n("513c"),n("e18c"),n("96db"),n("af86"),n("1fb3"),n("6a61"),n("cf7f")),s=n("e793"),o=n("9f3a"),u=n("1d45"),c=n.n(u),l=n("4d28"),d=n.n(l),h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"monitor-time-range"},[n("el-form",{attrs:{inline:""}},[n("el-form-item",{attrs:{label:t.$t("Time Range")}},[n("el-select",{on:{change:t.onChange},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,(function(t,e){return n("el-option",{key:e,attrs:{size:"small",value:t.name,label:t.label}})})),1)],1)],1)],1)},f=[],m=(n("dbb3"),{name:"MonitorTimeRange",props:{value:{type:String,default:"1h"}},data:function(){return{}},computed:{activeItem:function(){var t=this;return this.options.filter((function(e){return e.name===t.value}))[0]},options:function(){return[{name:"5m",label:"5 ".concat(this.$t("Minutes")),step:15,value:5,unit:"minute"},{name:"30m",label:"30 ".concat(this.$t("Minutes")),step:15,value:30,unit:"minute"},{name:"1h",label:"1 ".concat(this.$t("Hour")),step:15,value:1,unit:"hour"},{name:"6h",label:"6 ".concat(this.$t("Hours")),step:30,value:6,unit:"hour"},{name:"12h",label:"12 ".concat(this.$t("Hours")),step:60,value:12,unit:"hour"},{name:"1d",label:"1 ".concat(this.$t("Day")),step:60,value:1,unit:"day"},{name:"7d",label:"7 ".concat(this.$t("Days")),step:900,value:7,unit:"day"},{name:"14d",label:"14 ".concat(this.$t("Days")),step:3600,value:14,unit:"day"},{name:"30d",label:"30 ".concat(this.$t("Days")),step:3600,value:30,unit:"day"},{name:"3m",label:"3 ".concat(this.$t("Months")),step:86400,value:3,unit:"month"}]}},methods:{onChange:function(){this.$emit("input",this.activeName),this.$emit("change",this.activeItem)}}}),p=m,g=n("9ca4"),$=Object(g["a"])(p,h,f,!1,null,"1c243000",null),b=$.exports,v={name:"MonitorBase",components:{MonitorTimeRange:b},props:{nodeKey:{type:String,default:""}},data:function(){return{timeRange:"1h",timeRangeUnit:"hour",timeRangeValue:1,step:15,chartDict:{},dataDict:{},handle:void 0}},computed:Object(s["a"])({metrics:function(){return[]},internalNodeId:function(){return this.nodeKey||void 0}},Object(o["c"])("lang",["lang"])),watch:{lang:function(){this.getAllMetricsData()}},created:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("monitor/getMetrics");case 2:return t.handle=setInterval(Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getAllMetricsData();case 2:case"end":return e.stop()}}),e)}))),15e3),e.next=5,t.getAllMetricsData();case 5:case"end":return e.stop()}}),e)})))()},destroyed:function(){clearInterval(this.handle)},methods:{getMetricData:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$request.get("/monitor/prom/query-range/".concat(t),{node_key:e.internalNodeId,start:c()().subtract(e.timeRangeValue,e.timeRangeUnit).unix(),end:c()().unix(),step:e.step});case 2:if(r=n.sent,a=r.data.data.result[0],a){n.next=6;break}return n.abrupt("return");case 6:e.$set(e.dataDict,t,a.values.map((function(t){return t[0]=1e3*t[0],t[1]=Number(t[1]),t})));case 7:case"end":return n.stop()}}),n)})))()},renderMetricChart:function(t){var e=this,n=this.chartDict[t];n||(n=d.a.init(this.$el.querySelector("#"+t))),n.setOption({title:{text:this.$t(t)},tooltip:{trigger:"axis",axisPointer:{animation:!1}},xAxis:{type:"time"},yAxis:{type:"value",scale:!0,axisLabel:{formatter:function(n){return e.$utils.number.getMetricValueString(t,n)}}},series:[{name:t,type:"line",showSymbol:!1,hoverAnimation:!1,data:this.dataDict[t]}]})},getMetricsData:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Promise.all(t.map(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getMetricData(n);case 2:e.renderMetricChart(n);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 2:case"end":return n.stop()}}),n)})))()},getAllMetricsData:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getMetricsData(t.metrics);case 2:case"end":return e.stop()}}),e)})))()},onTimeRangeChange:function(t){this.timeRange=t.name,this.timeRangeValue=t.value,this.timeRangeUnit=t.unit,this.step=t.step,this.getAllMetricsData()}}},M=v,y=(n("e2dd"),Object(g["a"])(M,r,a,!1,null,"14842610",null));e["a"]=y.exports},"5a2b":function(t,e,n){"use strict";n.r(e);var r,a,i,s,o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container monitor"},[n("el-tabs",{model:{value:t.activeTabName,callback:function(e){t.activeTabName=e},expression:"activeTabName"}},[n("el-tab-pane",{attrs:{label:t.$t("Nodes"),name:"nodes"}},[n("el-tabs",{model:{value:t.nodeForm._id,callback:function(e){t.$set(t.nodeForm,"_id",e)},expression:"nodeForm._id"}},t._l(t.orderedNodeList,(function(e){return n("el-tab-pane",{key:e._id,attrs:{name:e._id,label:e.name+(e.is_master?" ("+t.$t("Master")+")":"")}},["nodes"===t.activeTabName&&t.nodeForm._id===e._id?n("node-monitor",{attrs:{"node-key":e.key}}):t._e()],1)})),1)],1),n("el-tab-pane",{attrs:{label:"MongoDB",name:"mongo"}},["mongo"===t.activeTabName?n("database-mongo"):t._e()],1),n("el-tab-pane",{attrs:{label:"Redis",name:"redis"}},["redis"===t.activeTabName?n("database-redis"):t._e()],1)],1)],1)},u=[],c=(n("dbb3"),n("08d5"),n("6a61"),n("cf7f")),l=n("e793"),d=n("9f3a"),h=n("2a9f"),f={name:"DatabaseMongo",extends:h["a"],computed:Object(l["a"])(Object(l["a"])({},Object(d["b"])("monitor",["mongoMetrics"])),{},{metrics:function(){return this.mongoMetrics}})},m=f,p=n("9ca4"),g=Object(p["a"])(m,r,a,!1,null,null,null),$=g.exports,b={name:"DatabaseRedis",extends:h["a"],computed:Object(l["a"])(Object(l["a"])({},Object(d["b"])("monitor",["redisMetrics"])),{},{metrics:function(){return this.redisMetrics}})},v=b,M=Object(p["a"])(v,i,s,!1,null,null,null),y=M.exports,D=n("c368"),w={name:"Monitor",components:{NodeMonitor:D["a"],DatabaseRedis:y,DatabaseMongo:$},data:function(){return{activeTabName:"nodes",activeNodeId:""}},computed:Object(l["a"])(Object(l["a"])({},Object(d["c"])("node",["nodeForm","nodeList"])),{},{orderedNodeList:function(){return JSON.parse(JSON.stringify(this.nodeList)).filter((function(t){return"online"===t.status})).sort((function(t,e){return t.is_master?-1:(e.is_master,1)}))}}),created:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("node/getNodeList");case 2:if(!t.nodeList.length){e.next=5;break}return e.next=5,t.$store.dispatch("node/getNodeData",t.nodeList[0]._id);case 5:case"end":return e.stop()}}),e)})))()}},O=w,x=Object(p["a"])(O,o,u,!1,null,"17f28ba2",null);e["default"]=x.exports},c368:function(t,e,n){"use strict";var r,a,i=n("e793"),s=n("9f3a"),o=n("2a9f"),u={name:"NodeMonitor",extends:o["a"],computed:Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(s["c"])("node",["nodeForm"])),Object(s["b"])("monitor",["nodeMetrics"])),{},{metrics:function(){return this.nodeMetrics}})},c=u,l=n("9ca4"),d=Object(l["a"])(c,r,a,!1,null,null,null);e["a"]=d.exports},cfca:function(t,e,n){},e2dd:function(t,e,n){"use strict";var r=n("cfca"),a=n.n(r);a.a}}]);